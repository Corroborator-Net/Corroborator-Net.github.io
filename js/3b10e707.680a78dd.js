(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["3b10e707"],{"1c4c":function(t,e,n){"use strict";var a=n("9b43"),i=n("5ca1"),r=n("4bf8"),s=n("1fa8"),c=n("33a4"),o=n("9def"),l=n("f1ae"),u=n("27ee");i(i.S+i.F*!n("5cc5")((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,d,h=r(t),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,v=0,S=u(h);if(g&&(m=a(m,f>2?arguments[2]:void 0,2)),void 0==S||p==Array&&c(S))for(e=o(h.length),n=new p(e);e>v;v++)l(n,v,g?m(h[v],v):h[v]);else for(d=S.call(h),n=new p;!(i=d.next()).done;v++)l(n,v,g?s(d,m,[i.value,v],!0):i.value);return n.length=v,n}})},"26a4":function(t,e,n){"use strict";var a=n("d048"),i=n.n(a);i.a},"284c":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",[t.isInitial?n("form",{staticClass:"absolute-center",attrs:{enctype:"multipart/form-data",novalidate:""}},[n("q-card",{staticClass:"text-white",staticStyle:{background:"radial-gradient(circle, #4578e3 0%, #336699 100%)"}},[n("q-card-section",[n("div",{staticClass:"text-h5 text-center q-pb-md text-italic"},[t._v("Verify Images")]),n("pinDialog",{staticClass:"justify-center q-mb-md",on:{new_pin:t.newPin}}),n("div",{staticClass:"text-center q-pb-md "},[t._v("Current pin: "+t._s(this.encryption_pin))]),n("div",{staticClass:"col-12 dropbox",attrs:{color:"secondary"}},[n("div",{staticClass:"row full-width absolute-center items-center content-end"},[n("q-icon",{staticClass:"q-pa-sm col-12",attrs:{name:"add_a_photo",size:"xl"}}),n("div",{staticClass:"col-12"},[n("b",[t._v("Set the Reporter PIN")]),n("br"),t._v("\n              then drag your file(s) here to begin "),n("br"),t._v(" or click to browse\n            ")])],1),n("input",{staticClass:"input-file absolute-center",attrs:{type:"file",name:t.uploadFieldName,accept:"image/*"},on:{change:function(e){t.filesChange(e.target.name,e.target.files),t.fileCount=e.target.files.length}}})])],1)],1)],1):t._e(),t.isInitial||t.isFailedDecrypt?t._e():n("div",{staticClass:"flex justify-center q-py-xl"},[n("q-card",{staticClass:"bg-blue-grey-2",staticStyle:{"max-width":"90vw"},attrs:{align:"center"}},[n("img",{staticClass:"q-ma-md",staticStyle:{"max-width":"90vh"},attrs:{id:"imgSelected",src:this.uploadedFile.url,alt:this.uploadedFile.originalName}}),t.isLoading?n("div",{staticClass:"text-center"},[n("q-spinner-pie",{staticClass:"q-mt-lg",attrs:{color:"primary",size:"13%"}}),n("p",{staticClass:"text-italic q-pa-sm",staticStyle:{"font-size":"150%"}},[t._v("Extracting Metadata... Checking Fingerprint")])],1):t._e(),t.metaData?n("div",{staticClass:"q-pa-md",style:t.verifiedColor},[t.verifiedCID?n("div",[n("h6",[t._v("Fingerprint VERIFIED!")])]):n("div",[n("h6",[t._v("Fingerprint "),n("b",[t._v("NOT")]),t._v(" in Log")])]),n("q-list",{staticClass:"q-ma-sm rounded-borders bg-blue-grey-2",attrs:{dense:"",bordered:""}},[n("q-item",{staticClass:"justify-center"},[n("p",{staticClass:"q-pt-sm",staticStyle:{"font-size":"150%"}},[t._v("Image Metadata:")])]),n("q-separator",{attrs:{inset:""}}),n("q-item",[n("q-item-section",[n("b",[t._v("Uploaded Fingerprint (CID)")])]),n("q-item-section",[t._v("\n              "+t._s(t.uploadedCids.hash)+"\n            ")])],1),t.isImg?n("div",t._l(t.metaData,(function(e,a){return n("q-item",[n("q-item-section",[n("b",[t._v(t._s(a))])]),n("q-item-section",[t._v("\n                "+t._s(e)+"\n              ")])],1)})),1):t._e(),t.isFailedMeta?n("div",[n("p",{staticClass:"text-2xl text-italic"},[n("br"),t._v(" ALERT: "),n("br"),t._v(" No Report Data "),n("br"),t._v(" Found Within Image")])]):t._e()],1)],1):t._e(),n("q-card-actions",{staticClass:"bg-blue-grey-2",attrs:{align:"around"}},[n("q-btn",{staticClass:"q-px-xl q-py-xs",attrs:{color:"blue-grey-9","icon-right":"layers_clear","no-caps":"",label:"Reset"},on:{click:function(e){return t.reset()}}}),n("q-btn",{attrs:{color:"blue-grey-9","no-caps":"",label:"Generate Report","icon-right":"image_search"},on:{click:function(e){return t.checkImage()}}})],1)],1)],1),t.isFailedDecrypt?n("div",{staticClass:"flex absolute-center object-center text-center"},[n("q-card",{staticClass:"bg-warning",staticStyle:{width:"80%"}},[n("h2",[t._v("Unable to Decrypt Data.")]),n("h5",[n("em",[t._v("Enter a new PIN")])]),n("pinDialog",{staticClass:"justify-center q-mb-xl",on:{new_pin:t.newPin}}),n("q-btn",{staticClass:"q-mb-lg",attrs:{size:"lg",rounded:"",color:"primary",stacked:"","no-caps":"",label:"Reset the Page"},on:{click:function(e){return t.reset()}}})],1)],1):t._e()])},i=[],r=(n("6762"),n("2fdb"),n("7f7f"),n("ac6a"),n("cadf"),n("06db"),n("5df3"),n("1c4c"),n("f3e3")),s=n.n(r),c=n("967e"),o=n.n(c),l=(n("96cf"),n("fa84")),u=n.n(l),d=n("f140c"),h=n("efe8"),p=n("29c9");n("551c");function f(t){var e=t.getAll("photos"),n=e.map((function(t){return m(t).then((function(e){return{id:e,originalName:t.name,fileName:t.name,url:e}}))}));return Promise.all(n)}function m(t){return new Promise((function(e,n){var a=new FileReader,i=document.createElement("img");a.onload=function(){i.src=a.result,e(g(i))},a.readAsDataURL(t)}))}function g(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");n.drawImage(t,0,0);var a=t.src;return a}var v={name:"FileCheck",data:function(){return{encryption_pin:this.$encryption_pin,currentStatus:"STATUS_INITIAL",metaData:"",verifiedCID:!1,knownCids:[],uploadedFile:[],uploadedCids:[],uploadError:null,uploadFieldName:"photos"}},mounted:function(){this.fillCIDsVariable(),this.reset()},computed:{verifiedColor:function(){return this.verifiedCID?"background: green":"background: yellow"},isInitial:function(){return"STATUS_INITIAL"===this.currentStatus},isImg:function(){return"STATUS_IMG"===this.currentStatus},isLoading:function(){return"STATUS_LOADING"===this.currentStatus},isSuccess:function(){return"STATUS_SUCCESS"===this.currentStatus},isFailedMeta:function(){return"STATUS_FAILED_META"===this.currentStatus},isFailedDecrypt:function(){return"STATUS_FAILED_DECRYPT"===this.currentStatus}},methods:{fillCIDsVariable:function(){var t=u()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h["a"].GetCIDs(this.encryption_pin);case 2:this.knownCids=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),retrieveImageMetadata:function(){var t=u()(o.a.mark((function t(){var e,n=this;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=document.getElementById("imgSelected"),this.currentStatus="STATUS_LOADING",t.next=4,p["a"].GetMetadata(e).then((function(t){n.metaData=t,n.currentStatus="STATUS_IMG"})).catch((function(t){n.metaData=t,n.currentStatus="STATUS_FAILED_META",console.log("Error: ".concat(t))}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),newPin:function(t){var e=this;this.encryption_pin=t,this.getAtraRecordData(this.encryption_pin).catch((function(t){console.log("ATRA ERROR"),e.currentStatus="STATUS_FAILED_DECRYPT"})).then((function(t){e.currentStatus="STATUS_INITIAL"}))},getAtraRecordData:function(){var t=u()(o.a.mark((function t(e){var n,a,i,r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.tableData=[],t.next=3,h["a"].GetCIDsLocationAndDates(e);case 3:for(n=t.sent,a=s()(n,5),this.knownCids=a[0],this.knownDates=a[1],this.knownLocations=a[2],this.knownBlockTimes=a[3],this.knownStorageLocations=a[4],i=0;i<this.knownCids.length;i++)r={cid:this.knownCids[i],fileT:this.knownDates[i],location:this.knownLocations[i],blockT:this.knownBlockTimes[i],StorageLocation:this.knownStorageLocations[i]},this.tableData.push(r);case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),reset:function(){this.verifiedCID=!1,this.currentStatus="STATUS_INITIAL",this.uploadedFile=[],this.uploadedCids=[],this.uploadError=null,this.metaData=""},save:function(t){var e=this;f(t).then((function(t){e.uploadedFile=t[0],e.currentStatus="STATUS_SUCCESS"})).catch((function(t){e.uploadError=t.response,e.currentStatus="STATUS_FAILED"}))},filesChange:function(){var t=u()(o.a.mark((function t(e,n){var a,i,r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$ipfs;case 2:return a=t.sent,t.next=5,a.add(n[0],{onlyHash:!0});case 5:if(i=t.sent,this.uploadedCids=i[0],r=new FormData,n.length){t.next=10;break}return t.abrupt("return");case 10:Array.from(Array(n.length).keys()).map((function(t){r.append(e,n[t],n[t].name)})),this.save(r);case 12:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),checkImage:function(){var t=u()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.verifiedCID=this.knownCids.includes(this.uploadedCids.hash),this.retrieveImageMetadata()[0];case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},components:{pinDialog:d["a"]}},S=v,C=(n("26a4"),n("2877")),_=n("fe09"),b=Object(C["a"])(S,a,i,!1,null,"2c56deb2",null);e["default"]=b.exports;b.options.components=Object.assign({QPage:_["p"],QCard:_["c"],QCardSection:_["e"],QIcon:_["i"],QSpinnerPie:_["u"],QList:_["o"],QItem:_["k"],QSeparator:_["t"],QItemSection:_["m"],QCardActions:_["d"],QBtn:_["b"]},b.options.components||{})},d048:function(t,e,n){}}]);