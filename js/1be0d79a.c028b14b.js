(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["1be0d79a"],{"0e3e4":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",[t.isLoading?n("div",{staticClass:"absolute-center text-center text-bold text-italic"},[n("h5",[t._v("Loading Logs...")]),n("q-spinner-pie",{attrs:{color:"primary",size:"40%"}})],1):t._e(),t.isTable?n("div",{staticClass:"flex flex-center"},[n("q-input",{staticClass:"q-py-lg q-mr-xl",staticStyle:{width:"55vw"},attrs:{dense:"",standout:"bg-primary",placeholder:"Search (CID, Dates, Locations, ...)"},scopedSlots:t._u([{key:"append",fn:function(){return[""===t.filter?n("q-icon",{attrs:{name:"search"}}):n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"clear"},on:{click:function(e){t.filter=""}}})]},proxy:!0}],null,!1,1308879548),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),n("pinDialog",{on:{new_pin:t.newPin}}),n("q-table",{staticClass:"my-sticky-header-column-table",staticStyle:{width:"80vw"},attrs:{name:"cidTable","row-key":"cid","no-data-label":"No Log Data Available. Have you input the correct Reporter PIN?","loading-label":"Gathering Log Data...",loading:t.loading,data:t.tableData,columns:t.columns,filter:t.filter,pagination:t.pagination,"table-style":"max-height: 67vh;","virtual-scroll":"","virtual-scroll-slice-size":25},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body-cell",fn:function(e){return[n("q-td",{staticClass:"cursor-pointer",attrs:{props:e},nativeOn:{click:function(n){return t.selectCID(e.row)}}},[n("div",[t._v(t._s(e.value))])])]}}],null,!1,3292509387)})],1):t._e(),t.currentRow.cid&&!t.isFailedDecrypt?n("div",{staticClass:"flex justify-center q-py-xl"},[n("q-card",{staticClass:"bg-blue-grey-2",staticStyle:{"max-width":"90vw"},attrs:{align:"center"}},[n("img",{staticClass:"q-ma-md",staticStyle:{"max-width":"90vh"},attrs:{id:"imgSelected",src:t.imgURL,alt:t.currentRow.cid}}),t.isReading?n("div",{staticClass:"text-center"},[n("q-spinner-pie",{staticClass:"q-mt-lg",attrs:{color:"primary",size:"13%"}}),n("p",{staticClass:"text-italic q-pa-sm",staticStyle:{"font-size":"150%"}},[t._v("Extracting Metadata... Checking Fingerprint")])],1):t._e(),t.metaData?n("div",{staticClass:"q-pa-md"},[n("q-list",{staticClass:"q-ma-sm rounded-borders bg-blue-grey-2",attrs:{dense:"",bordered:""}},[n("q-item",{staticClass:"justify-center"},[n("p",{staticClass:"q-pt-md",staticStyle:{"font-size":"150%"}},[t._v("Image Metadata:")])]),n("q-separator",{attrs:{inset:""}}),n("q-item",[n("q-item-section",[n("b",[t._v("Fingerprint (CID)")])]),n("q-item-section",[t._v("\n              "+t._s(t.currentRow.cid)+"\n            ")])],1),t._l(t.metaData,(function(e,a){return n("q-item",[n("q-item-section",[n("b",[t._v(t._s(a))])]),n("q-item-section",[t._v("\n              "+t._s(e)+"\n            ")])],1)})),n("q-separator",{attrs:{spaced:"",inset:""}}),n("q-item",{staticClass:"justify-center"},[n("p",{staticClass:"q-pt-sm",staticStyle:{"font-size":"150%"}},[t._v("Logbook data:")])]),n("q-separator",{attrs:{inset:""}}),t._l(t.currentRow,(function(e,a){return n("q-item",[n("q-item-section",[n("b",[t._v(t._s(a))])]),n("q-item-section",[t._v("\n              "+t._s(e)+"\n            ")])],1)}))],2)],1):t._e(),n("q-card-actions",{staticClass:"bg-blue-grey-2",attrs:{align:"around"}},[n("q-btn",{staticClass:"q-px-xl q-py-xs",attrs:{color:"blue-grey-9","icon-right":"layers_clear","no-caps":"",label:"Reset"},on:{click:function(e){return t.reset()}}}),n("q-btn",{attrs:{color:"blue-grey-9","no-caps":"",label:"Generate Report","icon-right":"image_search"},on:{click:function(e){return t.retrieveImageMetadata()}}})],1)],1)],1):t._e(),t.isFailedDecrypt?n("div",{staticClass:"flex absolute-center object-center text-center"},[n("q-card",{staticClass:"bg-warning",staticStyle:{width:"80%"}},[n("h2",[t._v("Unable to Decrypt Data.")]),n("h5",[n("em",[t._v("Enter a new PIN")])]),n("pinDialog",{staticClass:"justify-center q-mb-xl",on:{new_pin:t.newPin}}),n("q-btn",{staticClass:"q-mb-lg",attrs:{size:"lg",rounded:"",color:"primary",stacked:"","no-caps":"",label:"Reset the Page"},on:{click:function(e){return t.reset()}}})],1)],1):t._e(),t.isFailedAtra?n("div",{staticClass:"flex absolute-center object-center text-center"},[n("q-card",{staticClass:"bg-warning",staticStyle:{width:"80%"}},[n("h2",[t._v("Unable to get Data from Server.")]),n("h5",[n("em",[t._v("Try refreshing the page.")])])])],1):t._e()])},i=[],s=n("f3e3"),r=n.n(s),o=n("967e"),c=n.n(o),l=(n("96cf"),n("fa84")),u=n.n(l),d=n("c47a"),p=n.n(d),g=n("f140c"),h=n("efe8"),f=n("29c9"),m={name:"Logbook",data:function(){var t,e=this;return{filter:"",loading:!0,encryption_pin:this.$encryption_pin,tableData:[],currentStatus:"STATUS_LOADING",currentRow:[],shortCID:"",imgURL:"",knownCids:[],knownDates:[],knownBlockTimes:[],knownStorageLocations:[],knownLocations:[],metaData:"",pagination:{sortBy:"logT",descending:!1,page:1,rowsPerPage:10},columns:[{name:"cidTable",required:!0,label:"Fingerprint (CID)",field:function(t){return t.cid},format:function(t){return e.shortenCID(t)},classes:"ellipsis"},{name:"fileT",label:"Capture Time",field:"fileT",align:"center",sortable:!0},{name:"blockT",label:"Logged Time",field:"blockT",align:"center",sortable:!0},{name:"location",label:"Location (lat,long)",field:"location",align:"center",sortable:!0},(t={name:"StorageLocation",field:function(t){return t.storagelocation},label:"Storage"},p()(t,"field","StorageLocation"),p()(t,"align","center"),p()(t,"sortable",!0),t)]}},mounted:function(){this.reset()},computed:{isTable:function(){return"STATUS_TABLE"===this.currentStatus},isImg:function(){return"STATUS_IMG"===this.currentStatus},isLoading:function(){return"STATUS_LOADING"===this.currentStatus},isReading:function(){return"STATUS_READING"===this.currentStatus},isFailedDecrypt:function(){return"STATUS_FAILED_DECRYPT"===this.currentStatus},isFailedAtra:function(){return"STATUS_FAILED_ATRA"===this.currentStatus}},methods:{shortenCID:function(t){var e=t.substring(0,3)+" ... "+t.substring(t.length-7,t.length);return e},retrieveImageMetadata:function(){var t=u()(c.a.mark((function t(){var e,n=this;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=document.getElementById("imgSelected"),this.currentStatus="STATUS_READING",t.next=4,f["a"].GetMetadata(e).then((function(t){n.metaData=t})).catch((function(t){n.metaData=t,console.log("error reading metadata: "+t)}));case 4:this.currentStatus="STATUS_IMG";case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getAtraRecordData:function(){var t=u()(c.a.mark((function t(e){var n,a,i,s;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.tableData=[],this.currentStatus="STATUS_LOADING",t.next=4,h["a"].GetCIDsLocationAndDates(e);case 4:for(n=t.sent,a=r()(n,5),this.knownCids=a[0],this.knownDates=a[1],this.knownLocations=a[2],this.knownBlockTimes=a[3],this.knownStorageLocations=a[4],i=0;i<this.knownCids.length;i++)s={cid:this.knownCids[i],fileT:this.knownDates[i],location:this.knownLocations[i],blockT:this.knownBlockTimes[i],StorageLocation:this.knownStorageLocations[i]},this.tableData.push(s);this.currentStatus="STATUS_TABLE";case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),selectCID:function(){var t=u()(c.a.mark((function t(e){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e),this.currentRow=e,"DEVICE"!==this.currentRow.StorageLocation){t.next=6;break}return this.imgURL="https://gateway.pinata.cloud/ipfs/QmZ9FuQqp16bYdMqzdnihQHtdUogMWiVTHgzYwbttx5R9p",this.currentStatus="STATUS_IMG",t.abrupt("return");case 6:this.shortCID=this.shortenCID(this.currentRow.cid),this.imgURL="https://gateway.pinata.cloud/ipfs/"+this.currentRow.cid,this.currentStatus="STATUS_IMG";case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),reset:function(){this.newPin(this.encryption_pin)},newPin:function(t){var e=this;this.encryption_pin=t,this.currentRow=[],this.metaData="",this.currentStatus="STATUS_LOADING",this.getAtraRecordData(this.encryption_pin).catch((function(t){t instanceof SyntaxError?(console.log("Syntax error getting atra data: "+t),e.currentStatus="STATUS_FAILED_ATRA"):(console.log("error getting atra data: "+t),e.currentStatus="STATUS_FAILED_DECRYPT")}))}},components:{pinDialog:g["a"]}},S=m,b=(n("687d"),n("2877")),w=n("fe09"),_=Object(b["a"])(S,a,i,!1,null,null,null);e["default"]=_.exports;_.options.components=Object.assign({QPage:w["p"],QSpinnerPie:w["u"],QInput:w["j"],QIcon:w["i"],QTable:w["v"],QTd:w["w"],QCard:w["c"],QList:w["o"],QItem:w["k"],QSeparator:w["t"],QItemSection:w["m"],QCardActions:w["d"],QBtn:w["b"]},_.options.components||{})},"687d":function(t,e,n){"use strict";var a=n("e97d"),i=n.n(a);i.a},e97d:function(t,e,n){}}]);